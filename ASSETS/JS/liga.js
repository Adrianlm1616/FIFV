import id_tecnico from '/FIFV/ASSETS/JS/navbar.js';

export let partidos = [
    {
// Fecha 1 - 4 partidos
fecha: 1,
juegos: [
    // Partido 1: Arsenal vs Barcelona
    {
        equipo_local: 'Arsenal',
        goles_equipo_local: 2,
        equipo_visitante: 'Barcelona',
        goles_equipo_visitante: 2,
        estado_partido: 1 // 0 = Pendiente
    },
    // Partido 2: Liverpool vs Chelsea
    {
        equipo_local: 'Liverpool',
        goles_equipo_local: 0,
        equipo_visitante: 'Chelsea',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 3: Bayern Munich vs PSG
    {
        equipo_local: 'Bayern Munich',
        goles_equipo_local: 0,
        equipo_visitante: 'PSG',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 4: Man. City vs Atlético Madrid
    {
        equipo_local: 'Man. City',
        goles_equipo_local: 3,
        equipo_visitante: 'Atlético Madrid',
        goles_equipo_visitante: 1,
        estado_partido: 1
    }
]
    },
    {
// Fecha 2 - 4 partidos
fecha: 2,
juegos: [
    // Partido 1: Man. City vs Chelsea
    {
        equipo_local: 'Man. City',
        goles_equipo_local: 0,
        equipo_visitante: 'Chelsea',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 2: Arsenal vs PSG
    {
        equipo_local: 'Arsenal',
        goles_equipo_local: 0,
        equipo_visitante: 'PSG',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 3: Liverpool vs Barcelona
    {
        equipo_local: 'Liverpool',
        goles_equipo_local: 1,
        equipo_visitante: 'Barcelona',
        goles_equipo_visitante: 0,
        estado_partido: 1
    },
    // Partido 4: Bayern Munich vs Atlético Madrid
    {
        equipo_local: 'Bayern Munich',
        goles_equipo_local: 1,
        equipo_visitante: 'Atlético Madrid',
        goles_equipo_visitante: 2,
        estado_partido: 1
    }
]
    },
    {
// Fecha 3 - 4 partidos
fecha: 3,
juegos: [
    // Partido 1: PSG vs Chelsea
    {
        equipo_local: 'PSG',
        goles_equipo_local: 0,
        equipo_visitante: 'Chelsea',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 2: Atlético Madrid vs Barcelona
    {
        equipo_local: 'Atlético Madrid',
        goles_equipo_local: 0,
        equipo_visitante: 'Barcelona',
        goles_equipo_visitante: 4,
        estado_partido: 1
    },
    // Partido 3: Arsenal vs Man. City
    {
        equipo_local: 'Arsenal',
        goles_equipo_local: 3,
        equipo_visitante: 'Man. City',
        goles_equipo_visitante: 1,
        estado_partido: 1
    },
    // Partido 4: Liverpool vs Bayern Munich
    {
        equipo_local: 'Liverpool',
        goles_equipo_local: 1,
        equipo_visitante: 'Bayern Munich',
        goles_equipo_visitante: 1,
        estado_partido: 1
    }
]
    },
    {
// Fecha 4 - 4 partidos
fecha: 4,
juegos: [
    // Partido 1: Liverpool vs Man. City
    {
        equipo_local: 'Liverpool',
        goles_equipo_local: 0,
        equipo_visitante: 'Man. City',
        goles_equipo_visitante: 0,
        estado_partido: 1
    },
    // Partido 2: PSG vs Barcelona
    {
        equipo_local: 'PSG',
        goles_equipo_local: 0,
        equipo_visitante: 'Barcelona',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 3: Atlético Madrid vs Chelsea
    {
        equipo_local: 'Atlético Madrid',
        goles_equipo_local: 0,
        equipo_visitante: 'Chelsea',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 4: Arsenal vs Bayern Munich
    {
        equipo_local: 'Arsenal',
        goles_equipo_local: 1,
        equipo_visitante: 'Bayern Munich',
        goles_equipo_visitante: 2,
        estado_partido: 1
    }
]
    },
    {
// Fecha 5 - 4 partidos
fecha: 5,
juegos: [
    // Partido 1: Arsenal vs Atlético Madrid
    {
        equipo_local: 'Arsenal',
        goles_equipo_local: 3,
        equipo_visitante: 'Atlético Madrid',
        goles_equipo_visitante: 2,
        estado_partido: 1
    },
    // Partido 2: Liverpool vs PSG
    {
        equipo_local: 'Liverpool',
        goles_equipo_local: 0,
        equipo_visitante: 'PSG',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 3: Bayern Munich vs Chelsea
    {
        equipo_local: 'Bayern Munich',
        goles_equipo_local: 0,
        equipo_visitante: 'Chelsea',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 4: Man. City vs Barcelona
    {
        equipo_local: 'Man. City',
        goles_equipo_local: 2,
        equipo_visitante: 'Barcelona',
        goles_equipo_visitante: 1,
        estado_partido: 1
    }
]
    },
    {
// Fecha 6 - 4 partidos
fecha: 6,
juegos: [
    // Partido 1: Man. City vs PSG
    {
        equipo_local: 'Man. City',
        goles_equipo_local: 0,
        equipo_visitante: 'PSG',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 2: Arsenal vs Chelsea
    {
        equipo_local: 'Arsenal',
        goles_equipo_local: 0,
        equipo_visitante: 'Chelsea',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 3: Liverpool vs Atlético Madrid
    {
        equipo_local: 'Liverpool',
        goles_equipo_local: 2,
        equipo_visitante: 'Atlético Madrid',
        goles_equipo_visitante: 1,
        estado_partido: 1
    },
    // Partido 4: Bayern Munich vs Barcelona
    {
        equipo_local: 'Bayern Munich',
        goles_equipo_local: 1,
        equipo_visitante: 'Barcelona',
        goles_equipo_visitante: 2,
        estado_partido: 1
    }
]
    },
    {
// Fecha 7 - 4 partidos
fecha: 7,
juegos: [
    // Partido 1: Bayern Munich vs Man. City
    {
        equipo_local: 'Bayern Munich',
        goles_equipo_local: 1,
        equipo_visitante: 'Man. City',
        goles_equipo_visitante: 2,
        estado_partido: 1
    },
    // Partido 2: PSG vs Atlético Madrid
    {
        equipo_local: 'PSG',
        goles_equipo_local: 0,
        equipo_visitante: 'Atlético Madrid',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 3: Arsenal vs Liverpool
    {
        equipo_local: 'Arsenal',
        goles_equipo_local: 0,
        equipo_visitante: 'Liverpool',
        goles_equipo_visitante: 0,
        estado_partido: 1
    },
    // Partido 4: Chelsea vs Barcelona
    {
        equipo_local: 'Chelsea',
        goles_equipo_local: 0,
        equipo_visitante: 'Barcelona',
        goles_equipo_visitante: 0,
        estado_partido: 0
    }
]
    },
    {
// Fecha 8 - 4 partidos
fecha: 8,
juegos: [
    // Partido 1: Liverpool vs Bayern Munich
    {
        equipo_local: 'Liverpool',
        goles_equipo_local: 0,
        equipo_visitante: 'Bayern Munich',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 2: PSG vs Barcelona
    {
        equipo_local: 'PSG',
        goles_equipo_local: 0,
        equipo_visitante: 'Barcelona',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 3: Atlético Madrid vs Arsenal
    {
        equipo_local: 'Atlético Madrid',
        goles_equipo_local: 0,
        equipo_visitante: 'Arsenal',
        goles_equipo_visitante: 0,
        estado_partido: 0
    },
    // Partido 4: Man. City vs Chelsea
    {
        equipo_local: 'Man. City',
        goles_equipo_local: 0,
        equipo_visitante: 'Chelsea',
        goles_equipo_visitante: 0,
        estado_partido: 0
    }
]
    }
];


// calendario.html

switch(id_tecnico){
    case 1:
    equipos_select='Barcelona';
    break;
    case 2:
    equipos_select='Arsenal';
    break;
    case 3:
    equipos_select='Atlético Madrid';
    break;
    case 4:
    equipos_select='PSG';
    break;
    case 5:
    equipos_select='Man. City';
    break;
    case 6:
    equipos_select='Liverpool';
    break;
    case 7:
    equipos_select='Bayern Munich';
    break;
    case 8:
    equipos_select='Chelsea';
    break;
}

// Función para cargar el calendario filtrado por técnico
function cargarCalendarioPorTecnico(equipos_select) {
    // Verificar si estamos en la página calendario-jugadores.html
    if (window.location.pathname.includes("calendario-jugadores.html")) {
        const calendario = document.getElementById('calendario-liga');
        if (!calendario) {
            console.error("No se encontró el elemento con id 'calendario-liga'");
            return;
        }
        const tbody = calendario.getElementsByTagName('tbody')[0];
        if (!tbody) {
            console.error("No se encontró el elemento <tbody> dentro del calendario");
            return;
        }

        // Limpiar la tabla antes de llenarla con los partidos filtrados
        tbody.innerHTML = '';

        // Filtrar y mostrar solo los partidos del equipo del técnico
        partidos.forEach((fecha, numeroFecha) => {
            fecha.juegos.forEach((partido) => {
                if (partido.equipo_local === equipos_select || partido.equipo_visitante === equipos_select) {
                    // Crear una fila para cada partido del equipo del técnico
                    const row = tbody.insertRow();

                    // Crear celdas para cada columna de la fila
                    const celdaFecha = row.insertCell(0);
                    const celdaPartido = row.insertCell(1);
                    const celdaResultado = row.insertCell(2);
                    const celdaEstado = row.insertCell(3);

                    // Rellenar las celdas con los datos
                    celdaFecha.textContent = `Fecha ${numeroFecha}`;
                    celdaPartido.textContent = `${partido.equipo_local} vs ${partido.equipo_visitante}`;
                    celdaResultado.textContent = `${partido.goles_equipo_local} - ${partido.goles_equipo_visitante}`;

                    // Determinar el estado del partido
                    if (partido.estado_partido === 1) {
                        celdaEstado.textContent = "Finalizado";
                    } else {
                        celdaEstado.textContent = "Pendiente";
                    }
                }
            });
        });
    } else {
        console.log("No se aplica filtro en esta página.");
    }
}

// Función para llenar la tabla con todos los partidos sin filtro (calendario completo)
function cargarCalendario() {
    const calendario = document.getElementById('calendario-liga');
    if (!calendario) {
        console.error("No se encontró el elemento con id 'calendario-liga'");
        return;
    }
    const tbody = calendario.getElementsByTagName('tbody')[0];
    if (!tbody) {
        console.error("No se encontró el elemento <tbody> dentro del calendario");
        return;
    }

    // Función para agregar partidos de cada fecha a la tabla
    partidos.forEach((fecha, numeroFecha) => {
        fecha.juegos.forEach((partido) => {
            const row = tbody.insertRow();

            // Crear celdas para cada columna de la fila
            const celdaFecha = row.insertCell(0);
            const celdaPartido = row.insertCell(1);
            const celdaResultado = row.insertCell(2);
            const celdaEstado = row.insertCell(3);

            // Rellenar las celdas con los datos
            celdaFecha.textContent = `Fecha ${numeroFecha}`;
            celdaPartido.textContent = `${partido.equipo_local} vs ${partido.equipo_visitante}`;
            celdaResultado.textContent = `${partido.goles_equipo_local} - ${partido.goles_equipo_visitante}`;

            // Determinar el estado del partido
            if (partido.estado_partido === 1) {
                celdaEstado.textContent = "Finalizado";
            } else {
                celdaEstado.textContent = "Pendiente";
            }
        });
    });
}


//tabla de posiciones

 let tecnicos = {
    'Arsenal': 'Adrian Lara',
    'Liverpool': 'Camilo Paez',
    'Bayern Munich': 'Carlos Ortega',
    'Atlético Madrid': 'Juan Muñoz',
    'Chelsea': 'Juanfe Torres',
    'Man. City': 'Jorge Castro',
    'PSG': 'Daniel Fandiño',
    'Barcelona': 'Orlando Sanchez'
};

// Definir la estructura de la tabla de posiciones
export let equipos = {
    'Arsenal': { PJ: 0, PG: 0, PE: 0, PP: 0, GF: 0, GC: 0, GD: 0, PTS: 0 },
    'Liverpool': { PJ: 0, PG: 0, PE: 0, PP: 0, GF: 0, GC: 0, GD: 0, PTS: 0 },
    'Bayern Munich': { PJ: 0, PG: 0, PE: 0, PP: 0, GF: 0, GC: 0, GD: 0, PTS: 0 },
    'Atlético Madrid': { PJ: 0, PG: 0, PE: 0, PP: 0, GF: 0, GC: 0, GD: 0, PTS: 0 },
    'Chelsea': { PJ: 0, PG: 0, PE: 0, PP: 0, GF: 0, GC: 0, GD: 0, PTS: 0 },
    'Man. City': { PJ: 0, PG: 0, PE: 0, PP: 0, GF: 0, GC: 0, GD: 0, PTS: 0 },
    'PSG': { PJ: 0, PG: 0, PE: 0, PP: 0, GF: 0, GC: 0, GD: 0, PTS: 0 },
    'Barcelona': { PJ: 0, PG: 0, PE: 0, PP: 0, GF: 0, GC: 0, GD: 0, PTS: 0 }
};

// Función para procesar los resultados y actualizar las posiciones
function actualizarTablaPosiciones() {
    // Procesar los resultados de los partidos
    partidos.forEach(fecha => {
        fecha.juegos.forEach(partido => {
        // Solo procesar partidos finalizados
        if (partido.estado_partido === 1) {
            // Actualizar partidos jugados
            equipos[partido.equipo_local].PJ += 1;
            equipos[partido.equipo_visitante].PJ += 1;

            // Actualizar goles a favor y en contra
            equipos[partido.equipo_local].GF += partido.goles_equipo_local;
            equipos[partido.equipo_local].GC += partido.goles_equipo_visitante;
            equipos[partido.equipo_visitante].GF += partido.goles_equipo_visitante;
            equipos[partido.equipo_visitante].GC += partido.goles_equipo_local;

            // Actualizar diferencia de goles
            equipos[partido.equipo_local].GD = equipos[partido.equipo_local].GF - equipos[partido.equipo_local].GC;
            equipos[partido.equipo_visitante].GD = equipos[partido.equipo_visitante].GF - equipos[partido.equipo_visitante].GC;

            // Determinar victoria, empate o derrota
            if (partido.goles_equipo_local > partido.goles_equipo_visitante) {
                equipos[partido.equipo_local].PG += 1; // Victoria para el local
                equipos[partido.equipo_visitante].PP += 1; // Derrota para el visitante
                equipos[partido.equipo_local].PTS += 3; // 3 puntos para el local
            } else if (partido.goles_equipo_local < partido.goles_equipo_visitante) {
                equipos[partido.equipo_visitante].PG += 1; // Victoria para el visitante
                equipos[partido.equipo_local].PP += 1; // Derrota para el local
                equipos[partido.equipo_visitante].PTS += 3; // 3 puntos para el visitante
            } else {
                equipos[partido.equipo_local].PE += 1; // Empate
                equipos[partido.equipo_visitante].PE += 1; // Empate
                equipos[partido.equipo_local].PTS += 1; // 1 punto para el local
                equipos[partido.equipo_visitante].PTS += 1; // 1 punto para el visitante
            }
        }
    });
    });

    // Ordenar equipos por puntos, diferencia de goles, goles a favor, y alfabéticamente
    let equiposOrdenados = Object.entries(equipos)
        .sort((a, b) => {
            // Comparar puntos
            if (b[1].PTS !== a[1].PTS) return b[1].PTS - a[1].PTS;
            // Comparar diferencia de goles
            if (b[1].GD !== a[1].GD) return b[1].GD - a[1].GD;
            // Comparar goles a favor
            if (b[1].GF !== a[1].GF) return b[1].GF - a[1].GF;
            // Si todo es igual, ordenar alfabéticamente
            return a[0].localeCompare(b[0]);
        });

    // Mostrar la tabla de posiciones en HTML
    const tablaPosiciones = document.getElementById('tabla-posiciones').getElementsByTagName('tbody')[0];
    tablaPosiciones.innerHTML = ''; // Limpiar la tabla antes de agregar nuevas filas

    equiposOrdenados.forEach((equipo, index) => {
        const row = tablaPosiciones.insertRow();
        row.insertCell(0).textContent = index + 1; // Posición
        row.insertCell(1).textContent = equipo[0]; // Nombre del equipo
        row.insertCell(2).textContent = tecnicos[equipo[0]]; // Técnico
        row.insertCell(3).textContent = equipo[1].PJ; // Partidos Jugados
        row.insertCell(4).textContent = equipo[1].PG; // Victorias
        row.insertCell(5).textContent = equipo[1].PE; // Empates
        row.insertCell(6).textContent = equipo[1].PP; // Derrotas
        row.insertCell(7).textContent = equipo[1].GF; // Goles a Favor
        row.insertCell(8).textContent = equipo[1].GC; // Goles en Contra
        row.insertCell(9).textContent = equipo[1].GD; // Diferencia de Gol
        row.insertCell(10).textContent = equipo[1].PTS; // Puntos
    });
}

// Llamar a la función para cargar calendario y actualizar posiciones cuando la página cargue
window.onload = function () {
    cargarCalendario();
    actualizarTablaPosiciones();
};

